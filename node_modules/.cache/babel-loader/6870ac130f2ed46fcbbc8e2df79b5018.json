{"ast":null,"code":"var _jsxFileName = \"/Users/pelayotrives/Desktop/ironhack-material/modulo3/dia7/gamer-orbit-client/src/pages/auth/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { loginService } from \"../../services/auth.services\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/auth.context.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const {\n    authenticateUser\n  } = useContext(AuthContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const navigate = useNavigate();\n\n  const handleUsername = event => {\n    console.log(event.target.value);\n    setUsername(event.target.value);\n  };\n\n  const handlePassword = event => {\n    console.log(event.target.value);\n    setPassword(event.target.value);\n  };\n\n  const handleLogin = async event => {\n    event.preventDefault();\n    const user = {\n      username,\n      password\n    };\n\n    try {\n      // validaremos al usuario\n      const response = await loginService(user); // console.log(\"usuario validado\", response.data)\n      // guardamos el token en localStorage\n      // localStorage es el lugar local donde se guarda la informacion y setItem el método interno para acceder al localStorage y guardar información.\n\n      localStorage.setItem(\"authToken\", response.data.authToken);\n      authenticateUser(); //asignar los valores a los estados globales para manejo en \n\n      navigate(\"/profile\");\n    } catch (error) {\n      if (error.response.status === 400 || error.response.status === 401) {\n        setErrorMessage(error.response.data.errorMessage);\n      } else {\n        // navigate\n        navigate(\"/error\");\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Log In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleLogin,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        value: username,\n        onChange: handleUsername\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: password,\n        onChange: handlePassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), errorMessage !== null && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"DxGF0mfuvd+Hkvflv4VpREY6j7k=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useContext","loginService","useNavigate","AuthContext","Login","authenticateUser","username","setUsername","password","setPassword","errorMessage","setErrorMessage","navigate","handleUsername","event","console","log","target","value","handlePassword","handleLogin","preventDefault","user","response","localStorage","setItem","data","authToken","error","status"],"sources":["/Users/pelayotrives/Desktop/ironhack-material/modulo3/dia7/gamer-orbit-client/src/pages/auth/Login.jsx"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { loginService } from \"../../services/auth.services\";\n\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/auth.context.js\"\n\nfunction Login() {\n\n  const { authenticateUser } = useContext(AuthContext)\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const navigate = useNavigate()\n\n  const handleUsername = (event) => {\n      console.log(event.target.value);\n      setUsername(event.target.value)\n    }\n\n    const handlePassword = (event) => {\n      console.log(event.target.value);\n      setPassword(event.target.value)\n    }\n\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    const user = { \n      username,\n      password }\n\n      try {\n        // validaremos al usuario\n        const response = await loginService(user)\n        // console.log(\"usuario validado\", response.data)\n        // guardamos el token en localStorage\n        // localStorage es el lugar local donde se guarda la informacion y setItem el método interno para acceder al localStorage y guardar información.\n        localStorage.setItem(\"authToken\", response.data.authToken)\n        authenticateUser()\n        //asignar los valores a los estados globales para manejo en \n        navigate(\"/profile\")\n\n      } catch (error) {\n\n        if (error.response.status === 400 || error.response.status === 401) {\n          setErrorMessage(error.response.data.errorMessage)\n        } else {\n          // navigate\n          navigate(\"/error\")\n        }\n      }\n  };\n\n  return (\n    <div>\n\n      <h1>Log In</h1>\n\n      <form onSubmit={handleLogin}>\n        <label>Username:</label>\n        <input\n          type=\"text\"\n          name=\"username\"\n          value={username}\n          onChange={handleUsername}\n        />\n\n        <label>Password:</label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={password}\n          onChange={handlePassword}\n        />\n\n        { errorMessage !== null && <p>{errorMessage}</p> }\n\n        <button type=\"submit\">Login</button>\n      </form>\n      \n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,UAAnB,QAAqC,OAArC;AACA,SAASC,YAAT,QAA6B,8BAA7B;AAEA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,WAAT,QAA4B,+BAA5B;;;AAEA,SAASC,KAAT,GAAiB;EAAA;;EAEf,MAAM;IAAEC;EAAF,IAAuBL,UAAU,CAACG,WAAD,CAAvC;EAEA,MAAM,CAACG,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;EAEA,MAAM,CAACW,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,IAAD,CAAhD;EAEA,MAAMa,QAAQ,GAAGV,WAAW,EAA5B;;EAEA,MAAMW,cAAc,GAAIC,KAAD,IAAW;IAC9BC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,MAAN,CAAaC,KAAzB;IACAX,WAAW,CAACO,KAAK,CAACG,MAAN,CAAaC,KAAd,CAAX;EACD,CAHH;;EAKE,MAAMC,cAAc,GAAIL,KAAD,IAAW;IAChCC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,MAAN,CAAaC,KAAzB;IACAT,WAAW,CAACK,KAAK,CAACG,MAAN,CAAaC,KAAd,CAAX;EACD,CAHD;;EAMF,MAAME,WAAW,GAAG,MAAON,KAAP,IAAiB;IACnCA,KAAK,CAACO,cAAN;IACA,MAAMC,IAAI,GAAG;MACXhB,QADW;MAEXE;IAFW,CAAb;;IAIE,IAAI;MACF;MACA,MAAMe,QAAQ,GAAG,MAAMtB,YAAY,CAACqB,IAAD,CAAnC,CAFE,CAGF;MACA;MACA;;MACAE,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCF,QAAQ,CAACG,IAAT,CAAcC,SAAhD;MACAtB,gBAAgB,GAPd,CAQF;;MACAO,QAAQ,CAAC,UAAD,CAAR;IAED,CAXD,CAWE,OAAOgB,KAAP,EAAc;MAEd,IAAIA,KAAK,CAACL,QAAN,CAAeM,MAAf,KAA0B,GAA1B,IAAiCD,KAAK,CAACL,QAAN,CAAeM,MAAf,KAA0B,GAA/D,EAAoE;QAClElB,eAAe,CAACiB,KAAK,CAACL,QAAN,CAAeG,IAAf,CAAoBhB,YAArB,CAAf;MACD,CAFD,MAEO;QACL;QACAE,QAAQ,CAAC,QAAD,CAAR;MACD;IACF;EACJ,CA1BD;;EA4BA,oBACE;IAAA,wBAEE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,eAIE;MAAM,QAAQ,EAAEQ,WAAhB;MAAA,wBACE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QACE,IAAI,EAAC,MADP;QAEE,IAAI,EAAC,UAFP;QAGE,KAAK,EAAEd,QAHT;QAIE,QAAQ,EAAEO;MAJZ;QAAA;QAAA;QAAA;MAAA,QAFF,eASE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QATF,eAUE;QACE,IAAI,EAAC,UADP;QAEE,IAAI,EAAC,UAFP;QAGE,KAAK,EAAEL,QAHT;QAIE,QAAQ,EAAEW;MAJZ;QAAA;QAAA;QAAA;MAAA,QAVF,EAiBIT,YAAY,KAAK,IAAjB,iBAAyB;QAAA,UAAIA;MAAJ;QAAA;QAAA;QAAA;MAAA,QAjB7B,eAmBE;QAAQ,IAAI,EAAC,QAAb;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAnBF;IAAA;MAAA;MAAA;MAAA;IAAA,QAJF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD;;GA/EQN,K;UASUF,W;;;KATVE,K;AAiFT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}